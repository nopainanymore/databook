# 第五章、虚拟机栈

[toc]

## 概述

### 出现背景

![image](https://static.lovedata.net/20-11-08-08179c49011f764b77dc5e036f61f0be.png-wm)

![image](https://static.lovedata.net/20-11-08-7d344755b2567ead7fa316214b127442.png-wm)



![image](https://static.lovedata.net/20-11-08-9ab9746c1adb7a52a9f07a73bc9e4330.png-wm)



### 举例-栈

![image](https://static.lovedata.net/20-11-08-e78e751a8505056bed06057380470271.png-wm)

![image](https://static.lovedata.net/20-11-08-f8c4156ff3fe0597542da35bccc68518.png-wm)



![image](https://static.lovedata.net/20-11-08-e4ca78cab485ff964723ca125ec25c4b.png-wm)

![image](https://static.lovedata.net/20-11-08-4d42be548d6fd7952866de2e03f0275f.png-wm)

![image](https://static.lovedata.net/20-11-08-24740957a6bc60c1a5f7e1b0d49714f2.png-wm)

### 栈大小设置举例

![image](https://static.lovedata.net/20-11-08-366edcb768f8750b4ade90b7cc94e620.png-wm)

## 栈的存储单位

![image](https://static.lovedata.net/20-11-08-d8e84b64f18a7a0fc8cbff6215664858.png-wm)



![image](https://static.lovedata.net/20-11-08-680e4311ae67b6941fdd83fc1f54a5e3.png-wm)

![image](https://static.lovedata.net/20-11-08-517dd7e724e674107e9e9a24fcd63d9c.png-wm)



![image](https://static.lovedata.net/20-11-08-e754eb69bbe7f1a9242f7c0d3e231feb.png-wm)



### 栈帧的内部结构

![image](https://static.lovedata.net/20-11-08-035d1ec39a438d8025d64b1783f3cc19.png-wm)



## 局部变量表

![image](https://static.lovedata.net/20-11-08-306f217c806a3d2134c7f2b5f52736bb.png-wm)

![image](https://static.lovedata.net/20-11-08-5366d65d8e5c6a1e03840f739ad0420c.png-wm)

![image](https://static.lovedata.net/20-11-08-3fbf1846e9d39766e06855651bc584ed.png-wm)



### 关于Slot的理解

![image](https://static.lovedata.net/20-11-08-2f337908ab616577dc176cdf79416893.png-wm)

> 在构造函数或者实例方法中，能调用this，因为this在本地变量表中

![image](https://static.lovedata.net/20-11-08-54e04e0360b83161532bd6faa5b2f4a9.png-wm)

![image](https://static.lovedata.net/20-11-08-4ecc9652f6cc85ac7ef1cf73813f470f.png-wm)

![image](https://static.lovedata.net/20-11-08-f5fba81331554f1b232a91acb4fecd1b.png-wm)

> Double类型占据两个槽

![image](https://static.lovedata.net/20-11-08-d881821ac80c4a4c4830353888d7ac94.png-wm)



### Slot槽的重复利用问题

![image](https://static.lovedata.net/20-11-08-6d6a156eeb4a67cab1e4cea1f98c3798.png-wm)

![image](https://static.lovedata.net/20-11-08-970b6733592efbbb61b8f9095db478c5.png-wm)

## 操作数栈

## 代码追踪

## 栈顶缓存技术

## 动态链接

## 方法的调用：解析与分派

## 方法返回地址

## 一些附加信息

## 栈的相关面试题



